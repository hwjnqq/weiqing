{template 'common/header'}
<div class="main">
	<div class="container">
		<div class="penel we7-panel panel-special">
			<div class="panel-heading">
				<ol class="breadcrumb we7-breadcrumb">
					<a href=""><i class="fa fa-chevron-circle-left"></i> </a>
					<li>
						素材库
					</li>
					<li>
						新建图文素材
					</li>
				</ol>
			</div>
			<div class="panel-body">
				<div class="appmsg-edit-box">
					<div class="appmsg-preview-area">
						<div class="appmsg-edit-container appmsg-preview-container js-aside" style="height: 788px;">
							<div class="appmsg-container-hd">
								<h4 class="appmsg-container-title">图文列表</h4>
							</div>
							<div class="appmsg-container-bd">
								<div class="material-appmsg-item multi">
									<div class="appmsg-content">
										<div class="cover-appmsg-item">
											<h4 class="appmsg-title">
												<a href="" target="-blank">2</a>
											</h4>
											<div class="appmsg-thumb" style="background-image:url('https://mmbiz.qlogo.cn/mmbiz/BhHjYDpQJv6EePYdUjaibqEzxHweLAD3zI5VPCbZiapsUAUXYe4l1FtYgdHxm4Sz5zEUDZ5ce2b1BiboRIicia1G8Bg/0?wx-fmt=jpeg')">
											</div>
											<p class="appmsg-desc">11</p>
											<div class="appmsg-edit-mask">
												<a onclick="return false;" class="sort-up" href="javascript:;" title="上移">向上</a>
												<a onclick="return false;" class="sort-down" href="javascript:;" title="下移">向下</a>
												<a onclick="return false;" class="del" href="javascript:;" title="删除">删除</a>
											</div>
										</div>
										<div class="appmsg-item">
											<div class="appmsg-thumb" style="background-image:url('https://mmbiz.qlogo.cn/mmbiz/BhHjYDpQJv6EePYdUjaibqEzxHweLAD3zI5VPCbZiapsUAUXYe4l1FtYgdHxm4Sz5zEUDZ5ce2b1BiboRIicia1G8Bg/0?wx-fmt=jpeg');">

											</div>

											<h4 class="appmsg-title">
												<a href="" target="-blank" >1</a>
											</h4>
											<div class="appmsg-edit-mask">
												<a onclick="return false;" class="sort-up" href="javascript:;" title="上移">向上</a>
												<a onclick="return false;" class="sort-down" href="javascript:;" title="下移">向下</a>
												<a onclick="return false;" class="del" href="javascript:;" title="删除">删除</a>
											</div>
										</div>
										<div class="appmsg-item active">
											<div class="appmsg-thumb" style="background-image:url('https://mmbiz.qlogo.cn/mmbiz/BhHjYDpQJv6EePYdUjaibqEzxHweLAD3zI5VPCbZiapsUAUXYe4l1FtYgdHxm4Sz5zEUDZ5ce2b1BiboRIicia1G8Bg/0?wx-fmt=jpeg')">
											</div>
											<h4 class="appmsg-title">
												<a href="" target="-blank" >1</a>
											</h4>
											<div class="appmsg-edit-mask">
												<a onclick="return false;" class="sort-up" href="javascript:;" title="上移">向上</a>
												<a onclick="return false;" class="sort-down" href="javascript:;" title="下移">向下</a>
												<a onclick="return false;" class="del" href="javascript:;" title="删除">删除</a>
											</div>
										</div>
									</div>
								</div>
								<a title="添加一篇图文" class="appmsg-add" href="javascript:void(0);" style="display: block;">
									<i class="add-gray">+</i>
								</a>
							</div>
						</div>
					</div>

					<div class="appmsg-input-area">

						<!--编辑头部-->
						<div class="" style="width: 100%;height: 55px;color: #fff;">
							头部占位
						</div>
						<!--end编辑头部-->

						<!--标题-->
						<div class="appmsg-edit-item title">
							<label for="title" class="" style="display:none">请在这里输入标题</label>
							<input id="title" placeholder="请在这里输入标题" class="form-control" name="title" max-length="64" type="text">
							<em class="form-control-append">0/64</em>
						</div>

						<!--作者-->
						<div class="appmsg-edit-item author">
							<label for="author" class="" style="display:none">请输入作者</label>
							<!--#00001#-->
							<input id="author" placeholder="请输入作者" class="form-control" name="author" max-length="8" type="text">
							<!--%00001%-->
							<em class="form-control-append">0/8</em>
						</div>

						<!--正文-->
						<div class="editor-area">
							<div class="split-line"></div>

							<div class="" >
								<script type="text/javascript" src="./resource/components/ueditor/ueditor.config.js"></script>
								<script type="text/javascript" src="./resource/components/ueditor/ueditor.all.min.js"></script>
								<script type="text/javascript" src="./resource/components/ueditor/lang/zh-cn/zh-cn.js"></script>
								<textarea id="content" name="content" type="text/plain" style="height:200px;">从这里开始写正文</textarea>
								<script type="text/javascript">
									angular.module('materialApp', []);
									angular.bootstrap('document', ['materialApp']);
									var ueditoroption = {
										'autoClearinitialContent' : false,
										'toolbars' : [['fullscreen', 'source', 'preview', '|', 'bold', 'italic', 'underline', 'strikethrough', 'forecolor', 'backcolor', '|',
											'justifyleft', 'justifycenter', 'justifyright', '|', 'insertorderedlist', 'insertunorderedlist', 'blockquote', 'emotion',
											'link', 'removeformat', '|', 'rowspacingtop', 'rowspacingbottom', 'lineheight','indent', 'paragraph', 'fontsize', '|',
											'inserttable', 'deletetable', 'insertparagraphbeforetable', 'insertrow', 'deleterow', 'insertcol', 'deletecol',
											'mergecells', 'mergeright', 'mergedown', 'splittocells', 'splittorows', 'splittocols', '|', 'anchor', 'map', 'print', 'drafts']],
										'elementPathEnabled' : false,
										'initialFrameHeight': 200,
										'focus' : false,
										'maximumWords' : 9999999999999
									};
									var opts = {
										type :'image',
										direct : false,
										multiple : true,
										tabs : {
											'upload' : 'active',
											'browser' : '',
											'crawler' : ''
										},
										path : '',
										dest_dir : '',
										global : false,
										thumb : false,
										width : 0,
										topOffset: '155px',
										fileSizeLimit : 1024000
									};
									UE.registerUI('myinsertimage',function(editor,uiName){
										editor.registerCommand(uiName, {
											execCommand:function(){
												require(['fileUploader'], function(uploader){
													uploader.show(function(imgs){
														if (imgs.length == 0) {
															return;
														} else if (imgs.length == 1) {
															editor.execCommand('insertimage', {
																'src' : imgs[0]['url'],
																'_src' : imgs[0]['attachment'],
																'width' : '100%',
																'alt' : imgs[0].filename
															});
														} else {
															var imglist = [];
															for (i in imgs) {
																imglist.push({
																	'src' : imgs[i]['url'],
																	'_src' : imgs[i]['attachment'],
																	'width' : '100%',
																	'alt' : imgs[i].filename
																});
															}
															editor.execCommand('insertimage', imglist);
														}
													}, opts);
												});
											}
										});
										var btn = new UE.ui.Button({
											name: '插入图片',
											title: '插入图片',
											cssRules :'background-position: -726px -77px',
											onclick:function () {
												editor.execCommand(uiName);
											}
										});
										editor.addListener('selectionchange', function () {
											var state = editor.queryCommandState(uiName);
											if (state == -1) {
												btn.setDisabled(true);
												btn.setChecked(false);
											} else {
												btn.setDisabled(false);
												btn.setChecked(state);
											}
										});
										return btn;
									}, 19);

									UE.registerUI('myinsertvideo',function(editor,uiName){
										editor.registerCommand(uiName, {
											execCommand:function(){
												require(['fileUploader'], function(uploader){
													uploader.show(function(video){
														if (!video) {
															return;
														} else {
															var videoType = video.isRemote ? 'iframe' : 'video';
															editor.execCommand('insertvideo', {
																'url' : video.url,
																'width' : 300,
																'height' : 200
															}, videoType);
														}
													}, {fileSizeLimit : 15360000, type : 'video', allowUploadVideo : true});
												});
											}
										});
										var btn = new UE.ui.Button({
											name: '插入视频',
											title: '插入视频',
											cssRules :'background-position: -320px -20px',
											onclick:function () {
												editor.execCommand(uiName);
											}
										});
										editor.addListener('selectionchange', function () {
											var state = editor.queryCommandState(uiName);
											if (state == -1) {
												btn.setDisabled(true);
												btn.setChecked(false);
											} else {
												btn.setDisabled(false);
												btn.setChecked(state);
											}
										});
										return btn;
									}, 20);

									$(function(){
										var ue = UE.getEditor('content', ueditoroption);
										$('#content').data('editor', ue);
										$('#content').parents('form').submit(function() {
											if (ue.queryCommandState('source')) {
												ue.execCommand('source');
											}
										});
									});
								</script>
							</div>
							<div class="edui-iframe-switch-tips">
								<i class="icon-appmsg-edit-folder"></i>展开正文
							</div>
						</div>

						<div class="appmsg-edit-function-area ">
							<!-- BEGIN 原文链接 -->
							<div class="we7-form appmsg-edit-item origin-url-area">
								<div class="form-controls">
									<input id='check-1' type="checkbox" name='check-1' checked='checked' />
									<label for="check-1">展开链接</label>
								</div>
								<span class="form-control-box"><input class="form-control" name="source-url" type="text" size="60"></span>

							</div>
							<!-- END 原文链接 -->

						</div>
						<div class="appmsg-edit-highlight-area">

							<div class="appmsg-edit-title">发布样式编辑</div>
							<!-- EBGIN 封面 -->
							<div class="appmsg-edit-item gap-left">
								<label for="" class="form-label">
									<strong class="title">封面</strong>
									<p class="tips gap-left">小图片建议尺寸：200像素 * 200像素</p>
								</label>
								<div class="upload-wrap clearfix">
									<div class="">
										<a id="js-selectCoverFromContent" href="javascript:void(0);" onclick="return false;" class="btn btn-default">从正文选择</a>
										&nbsp;&nbsp;
										<a id="js-imagedialog" href="javascript:void(0);" onclick="return false;" class="btn btn-default">从图片库选择</a>

									</div>


								</div>
							</div>
							<!-- END 封面 -->
							<!-- BEGIN 摘要 -->
							<div class="js-desc-area appmsg-edit-item gap-left align-counter appmsg-description">
								<label for="" class="frm-label">
									<strong class="title">摘要</strong>

									<p class="tips l gap-left">选填，如果不填写会默认抓取正文前54个字</p>
								</label>
											<span class="form-textarea-box with-counter counter-out counter-in append count">
								                    <textarea class="form-textarea" name="digest" max-length="120" rows="4" ></textarea>
								                    <em class="form-control-append">0/120</em>
								                </span>

								<div class="frm-msg fail js-desc-error""></div>
						</div>
						<!-- END 摘要 -->
					</div>
				</div>
			</div>

		</div>
	</div>
	<nav class="navbar navbar-wxapp-bottom navbar-fixed-bottom" role="navigation">
		<div class="container">
			<div class="pager">
				<a type="button" class="btn btn-default pull-left">收起正文</a>
				<div class="pull-right">
					<a type="button" class="btn btn-primary">保存</a>
					<a type="button" class="btn btn-default">预览</a>
					<a type="button" class="btn btn-default">保存并群发</a>
				</div>

			</div>
		</div>
	</nav>
</div>
{template 'common/footer'}