{template 'common/header'}
{if $do == 'installed'}
<div id="js-system-module" ng-controller="installedCtrl" ng-cloak>
	<div class="we7-page-title">
		应用管理
		<a href="http://s.we7.cc" class="pull-right color-default"><i class="wi wi-market"></i>更多市场</a>
	</div>
	<ul class="we7-page-tab">
		<li class="active"><a href="{php echo url('system/module/installed')}">已安装应用  </a></li>
		<li><a href="{php echo url('system/module/not_installed')}">未安装的应用<span class="color-red">  ({$total_uninstalled}) </span></a></li>
		<li><a href="{php echo url('system/module/not_installed', array('status' => 'recycle'))}">已停用应用</a></li>
	</ul>
	<div class="we7-page-search clearfix">
		<form action="" method="get" class="pull-left">
			<div class="input-group we7-margin-bottom">
				<input type="hidden" name="letter" ng-model="activeLetter">
				<input type="hidden" name="c" value="system">
				<input type="hidden" name="a" value="module">
				<input type="hidden" name="do" value="page">
				<input class="form-control" name="title" value="{$title}" type="text" placeholder="名称" >
				<span class="input-group-addon"><button class="button" id="search"><i class="fa fa-search"></i></button></span>
			</div>
		</form>
		<!--<div class="pull-right">-->
		<!--<a href="添加.html" class="btn btn-danger">购买应用模块</a>-->
		<!--</div>-->
	</div>
	<div class="clearfix"></div>

	<ul class="letters-list">
		<li ng-class="activeLetter == letter ? 'active' : ''" ng-repeat="letter in letters"><a href="javascript:;" ng-click="searchLetter(letter)">{{ letter }}</a></li>
	</ul>

	<form action="" method="get">
		<table class="table we7-table vertical-middle">
			<tr>
				<th colspan="3" class="text-left">应用名</th>
				<th></th>
				<th></th>
				<th></th>
				<th></th>
				<th class="text-left">操作</th>
			</tr>
			<tr ng-repeat="module in module_list">
				<td>
					<div class="we7-form">
						<input id='check-1' type="checkbox" name='check-1' checked='checked' />
						<label for="check-1">&nbsp;</label>
					</div>
				</td>
				<td class="text-left">
					<img ng-src="{{ module.logo }}" class="img-responsive" style="width: 50px;height: 50px;"/>
				</td>
				<td class="text-left">
					<p>{{ module.title }}{{ module.logo }}</p>
					<span>版本：{{ module.version }} </span>{if $module['upgrade']}<span class="color-red">发现新版本</span>{/if}
				</td>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
				<td class="text-left">
					<div class="link-group">
						{if $module['upgrade']}
						<a href="" class="color-red">升级</a>
						{/if}
						<a href="">详情</a>
						<a href="">编辑</a>
						<a href="{php echo url('system/module/uninstall')}&name={{ module.name }}">停用</a>
					</div>
				</td>
			</tr>
			<!--<tr >-->
			<!--<td>-->
			<!--<div class="we7-form">-->
			<!--<input id='check-3' type="checkbox" name='check-1' checked='checked' />-->
			<!--<label for="check-3">&nbsp;</label>-->
			<!--</div>-->
			<!--</td>-->
			<!--<td class="text-left">-->
			<!--<img src="http://bbs.bcb5.com/uc_server/avatar.php?uid=2&size=middle" class="img-responsive"/>-->
			<!--</td>-->
			<!--<td class="text-left">-->
			<!--<p>微现场超级版微</p>-->
			<!--<span>版本：1.0 </span><span class="color-red">发现新版本</span>-->
			<!--</td>-->
			<!--<td>5个</td>-->
			<!--<td>3个</td>-->
			<!--<td>消耗短信</td>-->
			<!--<td>广告联盟</td>-->
			<!--<td class="text-left">-->
			<!--<div class="link-group">-->
			<!--<a href="" class="color-red">升级</a>-->
			<!--<a href="">详情</a>-->
			<!--<a href="">编辑</a>-->
			<!--<a href="">停用</a>-->
			<!--</div>-->
			<!--</td>-->
			<!--</tr>-->
		</table>
		<div class="select-all">
			<div class="we7-form">
				<input id='check-all' type="checkbox" name='check-all' checked='checked' />
				<label for="check-all">&nbsp;</label>
				<a href="" class="btn btn-primary">批量升级</a>
			</div>
			<div class="we7-form pull-right">
				{$pager}
			</div>
		</div>
	</form>
</div>
<script>
	angular.module('moduleApp').value('config',{
		'letters' : {php echo json_encode($letters)},
		'module_list' : {php echo json_encode($module_list)}
	});
	angular.bootstrap($('#js-system-module'), ['moduleApp']);
</script>
{elseif $do == 'not_installed'}
<div id="js-system-module-not_installed" ng-controller="notInstalledCtrl" ng-cloak>
	<div class="we7-page-title">
		应用管理
		<a href="http://s.we7.cc" class="pull-right color-default"><i class="wi wi-market"></i>更多市场</a>
	</div>
	<ul class="we7-page-tab">
		<li><a href="{php echo url('system/module/installed')}">已安装应用  </a></li>
		<li {if $status == 'uninstalled'}class="active"{/if}><a href="{php echo url('system/module/not_installed')}">未安装的应用<span class="color-red">  ({$total_uninstalled}) </span></a></li>
		<li {if $status == 'recycle'}class="active"{/if}><a href="{php echo url('system/module/not_installed', array('status' => 'recycle'))}">已停用应用</a></li>
	</ul>

	<div class="we7-page-search clearfix">
		<form action="" method="get" class="pull-left">
			<div class="input-group we7-margin-bottom">
				<input type="hidden" name="c" value="system">
				<input type="hidden" name="a" value="module">
				<input type="hidden" name="do" value="not_installed">
				<input type="hidden" name="letter" value="{$letter}">
				<input class="form-control " name="title" value="{$title}" type="text" placeholder="名称" >
				<span class="input-group-addon"><button id="search" class="button"><i class="fa fa-search"></i></button></span>
			</div>
		</form>
		<!--<div class="pull-right">-->
		<!--<a href="添加.html" class="btn btn-danger">购买应用模块</a>-->
		<!--</div>-->
	</div>
	<div class="clearfix">	</div>

	<ul class="letters-list">
		<li ng-repeat="letter in letters"><a href="javascript:;" ng-click="searchLetter(letter)">{{ letter }}</a></li>
	</ul>

	<table class="table we7-table vertical-middle">
		<tr>
			<th colspan="2" class="text-left">应用名</th>
			<th class="text-left">操作</th>
		</tr>
		<tr ng-repeat="module in module_list">
			<td class="text-left">
				<img ng-src="{{ module.logo }}" class="img-responsive" style="width: 50px;height: 50px;"/>
			</td>
			<td class="text-left">
				<p>{{ module.title }}</p>
				<span>版本：{{ module.version }} </span><span class="color-red">发现新版本</span>
			</td>
			<td class="text-left">
				<a href="" class="btn btn-primary">安装应用模块</a>
			</td>
		</tr>
	</table>
	</form>
	{$pager}
</div>
<script>
	angular.module('moduleApp').value('config', {
		'letters' : {php echo json_encode($letters)},
		'module_list' : {php echo json_encode($localUninstallModules)}
	});
	angular.bootstrap($('#js-system-module-not_installed'), ['moduleApp']);
</script>
{/if}
{template 'common/footer'}