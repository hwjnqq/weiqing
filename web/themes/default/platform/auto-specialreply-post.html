{template 'common/header-base-new'}
<div class="right-contnt">
	<div class="new-keyword">
		<ol class="breadcrumb we7-breadcrumb">
			<a href=""><i class="fa fa-chevron-circle-left"></i> </a>
			<li>
				非文字自动回复
			</li>
			<li>
				编辑
			</li>
		</ol>
		<div class="we7-form" ng-controller="MainCtrl">
			<form id="reply-form" class="form-horizontal form" action="{php echo url('platform/autoreply/post', array('m' => $m, 'rid' => $rid))}" method="post" enctype="multipart/form-data">
			<div class="form-group">
				<label class="control-label">是否开启</label>
				<div class="form-controls">
					<label>
						<input name="status" type="hidden" class="form-control" type="checkbox" value="{if !empty($setting[$type])}1{/if}">
						<div id="switch" class="switch{if !empty($setting[$type])} switchOn{/if}"></div>
					</label>
				</div>
			</div>
			<div id="key" {if empty($setting[$type])}style="display : none"{/if} >
			{php echo module_build_form('autoreply', $rule_id)}
			</div>
			<input type="submit" name="submit"  value="保存" class="btn btn-primary" style="padding: 6px 50px;"/>
			<input type="hidden" name="token" value="{$_W['token']}">
			<input type="hidden" name="m" value="{$m}">
			<input type="hidden" name="type" value="{$type}">
		</form>
		</div>
	</div>
</div>
<script>
	require(['underscore', 'util'], function( _, util){
		angular.module('app', []).controller('MainCtrl', function($scope){
			window.initReplyController($scope);
		});
		angular.bootstrap(document, ['app']);
		$('#switch').click(function() {
			var status = $('[name="status"]').val();
			status = status == 1 ? 0: 1;
			$('[name="status"]').val(status);
			var clas = status == 1? 'switch switchOn' : 'switch';
			if (status == 1) {
				$('#key').show();
			} else {
				$('#key').hide();
			}
			$('#switch').attr('class', clas);
		});
	});
</script>

